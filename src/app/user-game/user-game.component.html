<section id="user-panel" class="user-info-panel">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<div class="user-main-panel">
					<div class="other-info">
						<div class="user-panel-header">
							<h5>Moje gry planszowe</h5>
							<button class="btn right" data-toggle="modal" data-target="#add-game"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span>dodaj grę</button>
						</div>
						<div class="game-box">
							<div class="game-single-box" *ngFor="let game of userGame">
								<div class="game-img">
									<img src="http://localhost:8080/assets/uploads/{{ game.gameImage }}">
								</div>
								<div class="game-info">
									<p>Nazwa gry: {{ game.title }}</p>
									<p>Kategoria: {{ game.category }}</p>
									<p>Stan: {{ game.state }}</p>
									<p>Dodatkowy opis: {{ game.description }}</p>
								</div>
								<div class="game-info-function-box">
									<button class="btn btn-default" data-toggle="modal" attr.data-target="#edit-game-{{game._id}}">
										<span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
									</button>
									<button class="btn btn-default" data-toggle="modal" attr.data-target="#remove-game-{{game._id}}">
										<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
									</button>

									<!-- Edit Game Modal -->

									<div class="modal fade" id="edit-game-{{game._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
									  <div class="modal-dialog" role="document">
									    <div class="modal-content">
									      <div class="modal-header">
									      	<button type="button" class="close" data-dismiss="modal">&times;</button>
									        <h4 class="modal-title">Edytuj grę</h4>
									      </div>
									      <div class="modal-body">
											<div class="form-group">
												<label>Tytuł: <input class="form-control" value="{{game.title}}" #userGameTitle /></label>
											</div>
											<label>Zdjęcie:
												<div class="game-img">
													<img src="./assets/uploads/{{ game.gameImage }}">
												</div>
											<input type="file" name="photo" value="cdcd" ng2FileSelect [uploader]="uploader" #userGameGameImage (change)="onChange($event)" /></label>
											<div class="form-group">
											    <label for="exampleSelect1">Kategoria</label>
											    <select class="form-control" value="{{game.category}}" id="exampleSelect1" #userGameCategory>
											      <option>Strategiczna</option>
											      <option>Logiczna</option>
											      <option>Ekonomiczna</option>
											      <option>Imprezowa</option>
											      <option>Karciana</option>
											      <option>Figurkowa</option>
											      <option>Przygodowa</option>
											      <option>Rodzinna</option>
											      <option>Zręcznościowa</option>
											    </select>
											</div>
											<div class="form-group">
												<label for="exampleSelect1">Stan</label>
											    <select class="form-control" value="{{game.state}}" id="exampleSelect1" #userGameState>
											      <option>Nowa</option>
											      <option>Używana</option>
											    </select>
											</div>
											<div class="form-group">
												<label>Dodatkowy opis: <textarea class="form-control" value="{{game.description}}"#userGameDescription></textarea></label>
											</div>
									      </div>
									      <div class="modal-footer">
									      	<button class="btn btn-default" (click)="uploader.uploadAll(); editUserGame(game._id, userGameTitle.value, userGameCategory.value, userGameState.value, userGameDescription.value, userGameGameImage.value)" data-dismiss="modal">Akceptuj</button>
									      </div>
									    </div>
									  </div>
									</div>

									<!-- Remove Game Modal -->

									<div class="modal fade" id="remove-game-{{game._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
									  <div class="modal-dialog" role="document">
									    <div class="modal-content">
									      <div class="modal-header">
									      	<button type="button" class="close" data-dismiss="modal">&times;</button>
									        <h4 class="modal-title">Potwierdzenie</h4>
									      </div>
									      <div class="modal-body">
											<label>Czy na pewno chcesz usunąć grę ze swojego profilu?</label>
									      </div>
									      <div class="modal-footer">
									      	<button class="btn btn-default" (click)="removeUserGame(game._id);" data-dismiss="modal">Potwierdź</button>
									      </div>
									    </div>
									  </div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<app-user-info></app-user-info>
			</div>
		</div>
	</div>
</section>

<!-- Add Game Modal -->
<div class="modal fade" id="add-game" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Dodaj grę</h4>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<label>Tytuł: <input class="form-control" #userGameTitle /></label>
				</div>
				<div class="form-group">
				    <label for="exampleSelect1">Kategoria</label>
				    <select class="form-control" id="exampleSelect1" #userGameCategory>
				      <option>Strategiczna</option>
				      <option>Logiczna</option>
				      <option>Ekonomiczna</option>
				      <option>Imprezowa</option>
				      <option>Karciana</option>
				      <option>Figurkowa</option>
				      <option>Przygodowa</option>
				      <option>Rodzinna</option>
				      <option>Zręcznościowa</option>
				    </select>
				</div>
				<div class="form-group">
					<label for="exampleSelect1">Kategoria</label>
				    <select class="form-control" id="exampleSelect1" #userGameState>
				      <option>Nowa</option>
				      <option>Używana</option>
				    </select>
				</div>
				<div class="form-group">
					<label>Dodatkowy opis: <textarea class="form-control" #userGameDescription ></textarea></label>
				</div>
				<div class="form-control">
					<input type="file" name="photo" ng2FileSelect [uploader]="uploader" #userGameGameImage (change)="onChange($event)" />
				</div>
			</div>
			<div class="modal-footer">
				<button class="btn btn-default" (click)="uploader.uploadAll(); addUserGame(userGameTitle.value, userGameCategory.value, userGameState.value, userGameDescription.value, userGameGameImage.value); userGameTitle.value=''; userGameCategory.value=''; userGameState.value=''; userGameDescription.value; userGameGameImage.value='';" data-dismiss="modal"
				[disabled]="!uploader.getNotUploadedItems().length">Akceptuj</button>
			</div>
		</div>
	</div>
</div>
