<div class="user-sidebar inner">
	<div class="other-info">
		<img class="user-avatar" src="./assets/images/avatar.png" alt="user-avatar" />
		<ul>
			<li *ngIf="userInfo?.surName" class="username">{{userInfo?.surName}}</li>
			<li *ngIf="userInfo?.contactNumber">
				<span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>Telefon: {{userInfo?.contactNumber}}
			</li>
			<li *ngIf="userInfo?.local.email">
				<span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
				Email: <a href="mailto:{{userInfo?.local.email}}">{{userInfo?.local.email}}</a>
			</li>
			<li *ngIf="userInfo?.dateBirth">
				<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
				Data urodzenia: {{userInfo?.dateBirth}}
			</li>
			<li *ngIf="userInfo?.city" class="usercity">
				<span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
				Miasto: {{userInfo?.city}}
			</li>
			<li>
				<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
				Ilość gier na wymianę: 2
			</li>
			<li>
				<span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
				4 przeprowadzonych wymian
			</li>
			<li>
				<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
				Ocena społeczności: 8,7/10
			</li>
		</ul>
		<div class="text-center ">
			<button class="btn custom-button" data-toggle="modal" attr.data-target="#edit-user-{{userInfo?._id}}">
				<span class="glyphicon glyphicon-cog"></span> Edytuj dane
			</button>
		</div>
		<!-- Edit User Modal -->
		<div class="modal fade" id="edit-user-{{userInfo?._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Edytuj dane</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>Login: </label>
							<input class="form-control" [ngModel]="model.login" required minlength="5" name="login" value="{{userInfo?.local.login}}" #userLogin="ngModel"/>
							<div *ngIf="userLogin.errors && (userLogin.dirty || userLogin.touched)" class="alert alert-danger">
								<div [hidden]="!userLogin.errors.required">
									Login jest wymagany
								</div>
								<div [hidden]="!userLogin.errors.minlength">
									Wpisz co najmniej 5 znaków
								</div>
							</div>
						</div>
						<div class="form-group">
							<label>Imię: </label>
							<input class="form-control" [ngModel]="model.surname" minlength="3" name="surname" placeholder="podaj imię" value="{{userInfo?.surName}}" #userSurname="ngModel" />
							<div *ngIf="userSurname.errors && (userSurname.dirty || userSurname.touched)" class="alert alert-danger">
								<div [hidden]="!userSurname.errors.minlength">
									Wpisz co najmniej 3 znaki
								</div>
							</div>
						</div>
						<div class="form-group">
							<label>Data urodzenia: </label>
							<my-date-picker name="mydate" [options]="myDatePickerOptions" [(ngModel)]="model.datepicker" required></my-date-picker>
						</div>
						<div class="form-group">
							<label>Miasto: </label>
							<input class="form-control" [ngModel]="model.city" minlength="3" name="city" placeholder="podaj miasto" value="{{userInfo?.city}}" #userCity="ngModel" />
							<div *ngIf="userCity.errors && (userCity.dirty || userCity.touched)" class="alert alert-danger">
								<div [hidden]="!userCity.errors.minlength">
									Wpisz co najmniej 3 znaki
								</div>
							</div>
						</div>
						<div class="form-group">
							<label>Numer telefonu: </label>
							<input type="text" class="form-control" minlength="9" maxlength="9" placeholder="666-888-999" value="{{userInfo?.contactNumber}}" [ngModel]="model.contactNumber" pattern="^\d+$" name="contactNumber"  #userContactNumber="ngModel" />
							<div *ngIf="userContactNumber.errors && (userContactNumber.dirty || userContactNumber.touched)" class="alert alert-danger">
								<div [hidden]="!userContactNumber.errors.pattern">
									Użyj tylko cyfr
								</div>
								<div [hidden]="!userContactNumber.errors.minlength">
									Wpisz 9 cyfr
								</div>
								<div [hidden]="!userContactNumber.errors.maxlength">
									Wpisz 9 cyfr
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button class="btn custom-button" (click)="editUserInfo(userInfo?._id, userLogin.value, userSurname.value, userCity.value, userContactNumber.value)" data-dismiss="modal">Zatwierdź</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
