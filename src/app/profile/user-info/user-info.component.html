<div class="user-sidebar inner">
	<div class="other-info">
		<img class="user-avatar" src="{{this.appService.getUrl('/assets/uploads/avatars/')}}{{userInfo?.avatarImage}}" alt="user-avatar" />
		<ul>

			<div class="user-info-box">
				<li *ngIf="userInfo?.local" class="username">{{userInfo?.local.login}}</li>
				<li *ngIf="userInfo?.facebook" class="username">{{userInfo?.facebook.name}}</li>

				<!-- FACEBOOK INFO  -->
				<div *ngIf="userInfo?.facebook">
						<li *ngIf="userInfo?.facebook.email">
							<span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
							Email: <a href="mailto:{{userInfo?.facebook.email}}">{{userInfo?.facebook.email}}</a>
						</li>
				</div>

				<!-- LOCAL INFO -->

				<div *ngIf="userInfo?.local">
						<li *ngIf="userInfo?.local.email">
							<span class="glyphicon glyphicon-envelope" aria-hidden="true"></span>
							Email: <a href="mailto:{{userInfo?.local.email}}">{{userInfo?.local.email}}</a>
						</li>
				</div>

				<li *ngIf="userInfo?.contactNumber">
					<span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>Telefon: {{userInfo?.contactNumber}}
				</li>
				<li *ngIf="userInfo?.dateBirth">
					<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
					Data urodzenia: {{userInfo?.dateBirth}}
				</li>
				<li *ngIf="userInfo?.city" class="usercity">
					<span class="glyphicon glyphicon-map-marker" aria-hidden="true"></span>
					Miasto: {{userInfo?.city}}
				</li>
			</div>
			<div class="user-info-box">
				<li>
					<span class="glyphicon glyphicon-list" aria-hidden="true"></span>
					Ilość gier na wymianę: 2
				</li>
				<li>
					<span class="glyphicon glyphicon-ok-sign" aria-hidden="true"></span>
					4 przeprowadzonych wymian
				</li>
				<li>
					<span class="glyphicon glyphicon-star" aria-hidden="true"></span>
					Ocena społeczności: 8,7/10
				</li>
			</div>
		</ul>
		<div class="text-center ">
			<button class="btn custom-button" data-toggle="modal" attr.data-target="#edit-user-{{userInfo?._id}}">
				<span class="glyphicon glyphicon-cog"></span> Edytuj dane
			</button>
		</div>
		<!-- Edit User Modal -->
		<div class="modal fade" id="edit-user-{{userInfo?._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Edytuj dane</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>Avatar: </label>
							<input type="file" name="photo" ng2FileSelect [uploader]="avatarUploader" #userAvatarImage (change)="onChange($event)" />
						</div>
						<div class="form-group">
							<label>Data urodzenia: </label>
							<my-date-picker name="mydate" [options]="myDatePickerOptions" [(ngModel)]="model.datepicker" required></my-date-picker>
						</div>
						<div class="form-group">
							<label>Miasto: </label>
							<input class="form-control" [ngModel]="model.city" minlength="3" name="city" placeholder="podaj miasto" value="{{userInfo?.city}}" #userCity="ngModel" />
							<div *ngIf="userCity.errors && (userCity.dirty || userCity.touched)" class="alert alert-danger">
								<div [hidden]="!userCity.errors.minlength">
									Wpisz co najmniej 3 znaki
								</div>
							</div>
						</div>
						<div class="form-group">
							<label>Numer telefonu: </label>
							<input type="text" class="form-control" minlength="9" maxlength="9" placeholder="666-888-999" value="{{userInfo?.contactNumber}}" [ngModel]="model.contactNumber" pattern="^\d+$" name="contactNumber"  #userContactNumber="ngModel" />
							<div *ngIf="userContactNumber.errors && (userContactNumber.dirty || userContactNumber.touched)" class="alert alert-danger">
								<div [hidden]="!userContactNumber.errors.pattern">
									Użyj tylko cyfr
								</div>
								<div [hidden]="!userContactNumber.errors.minlength">
									Wpisz 9 cyfr
								</div>
								<div [hidden]="!userContactNumber.errors.maxlength">
									Wpisz 9 cyfr
								</div>
							</div>
						</div>
						<div [ngClass]="{hidden: userInfo?.local == null}">
							<div class="form-group">
								<label>Hasło:</label>
								<input type="password" class="form-control" name="password" minlength="3" required [ngModel]="model.password" #userPassword="ngModel">
								<div *ngIf="userPassword.errors && (userPassword.dirty || userPassword.touched)" class="alert alert-danger">
									<div [hidden]="!userPassword.errors.required">
										Hasło jest wymagane
									</div>
									<div [hidden]="!userPassword.errors.minlength">
										Wpisz co najmniej 3 znaki
									</div>
								</div>
							</div>
							<div class="form-group">
								<label>Potwierdź hasło:</label>
								<input type="password" class="form-control" name="confirmPassword" minlength="3" validateEqual="password" required [ngModel]="model.confirmPassword" #userConfirmPassword="ngModel" />
								<div *ngIf="userConfirmPassword.errors && (userConfirmPassword.dirty || userConfirmPassword.touched)" class="alert alert-danger">
									<div [hidden]="!userConfirmPassword.errors.required">
										Potwierdzenie hasła jest wymagane
									</div>
									<div [hidden]="!userConfirmPassword.errors.minlength">
										Conajmniej 3 znaki
									</div>
									<div [hidden]="!userConfirmPassword.errors">
										Musi być takie samo jak hasło
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button class="btn custom-button" (click)="avatarUploader.uploadAll(); editUserInfo(userInfo?._id, userCity.value, userContactNumber.value, userAvatarImage.value, userPassword.value)" data-dismiss="modal">Zatwierdź</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
